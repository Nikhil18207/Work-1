# BEROE PROCUREMENT AI - SYSTEM ARCHITECTURE DIAGRAM

## COMPLETE SYSTEM VISUALIZATION

```
┌────────────────────────────────────────────────────────────────────────────────────┐
│                        BEROE UNIVERSAL PROCUREMENT AI                              │
│                          SYSTEM ARCHITECTURE DIAGRAM                               │
└────────────────────────────────────────────────────────────────────────────────────┘


                              ┌─────────────────────────────────────┐
                              │      USER INTERFACES                │
                              ├─────────────────────────────────────┤
                              │ • Streamlit Web UI (app.py)         │
                              │ • CLI Chat (main.py)                │
                              │ • FastAPI REST Endpoints            │
                              │ • Python Direct API                 │
                              └────────────┬────────────────────────┘
                                           │
                                           ↓
        ┌──────────────────────────────────────────────────────────────┐
        │                   CONVERSATIONAL AI                          │
        │              (backend/conversational_ai.py)                  │
        │                   [1,043 lines]                              │
        ├──────────────────────────────────────────────────────────────┤
        │                                                               │
        │  ┌─────────────────────┐    ┌──────────────────┐           │
        │  │ Semantic Analyzer   │ →  │ Entity Extraction│           │
        │  │ Intent Understanding│    │ Product, Region, │           │
        │  └─────────────────────┘    │ Metrics, Actions │           │
        │         ↓                    └──────────────────┘           │
        │  ┌──────────────────────────────────────────────┐           │
        │  │   INTELLIGENT ROUTING (Priority Order)       │           │
        │  ├──────────────────────────────────────────────┤           │
        │  │ 1. YOUR DATA (CSV) - DataLoader              │           │
        │  │ 2. YOUR POLICIES (RAG) - VectorStore         │           │
        │  │ 3. WEB SEARCH - IntelligentSearchEngine      │           │
        │  │ 4. LLM REASONING - OpenAI GPT-4             │           │
        │  └──────────────────────────────────────────────┘           │
        │                                                               │
        └──────────────────────────────────────────────────────────────┘
                                   ↓
        ┌────────────────────────────┬────────────────────────────┐
        ↓                            ↓                            ↓
    ┌─────────────┐          ┌──────────────┐        ┌───────────────┐
    │ DataLoader  │          │ RAGEngine    │        │ WebSearch &   │
    │             │          │ VectorStore  │        │ LLMEngine     │
    │ CSV Files:  │          │              │        │               │
    │ • spend_data│          │ ChromaDB     │        │ • OpenAI GPT4 │
    │ • suppliers │          │ Vector DB    │        │ • Web Scraper │
    │ • rules     │          │              │        │ • Market data │
    │ • pricing   │          │ 15 Docs:     │        │               │
    │ • contracts │          │ • Policies   │        └───────────────┘
    │             │          │ • Contracts  │
    │ 11 CSVs     │          │ • Best prac. │
    └─────────────┘          └──────────────┘


    ┌──────────────────────────────────────────────────────────────────┐
    │         DATA ANALYSIS & INTELLIGENCE ENGINES                      │
    ├──────────────────────────────────────────────────────────────────┤
    │                                                                    │
    │  ┌──────────────────┐  ┌──────────────────┐  ┌────────────────┐ │
    │  │ RuleEngine       │  │ ScenarioDetector │  │ SemanticAnalyzer
    │  │ (35+ rules)      │  │ (Situation type) │  │ (Query intent) │
    │  └──────────────────┘  └──────────────────┘  └────────────────┘ │
    │                                                                    │
    │  ┌──────────────────┐  ┌──────────────────┐  ┌────────────────┐ │
    │  │ RecommendationGen│  │ TariffCalculator │  │ ScenarioAnalyzer
    │  │ (Action plans)   │  │ (27 products,    │  │ (What-if)      │
    │  │                  │  │ 150+ routes)     │  │                │
    │  └──────────────────┘  └──────────────────┘  └────────────────┘ │
    │                                                                    │
    │  ┌──────────────────┐  ┌──────────────────┐  ┌────────────────┐ │
    │  │ LeadershipBrief  │  │ SavingsCalculator│  │ ActionPlanGen  │
    │  │ Generator        │  │ (Cost analysis)  │  │ (Implementation)
    │  │ (Executive brief)│  │                  │  │                │
    │  └──────────────────┘  └──────────────────┘  └────────────────┘ │
    │                                                                    │
    └──────────────────────────────────────────────────────────────────┘
                                   ↓
    ┌─────────────────────────────────────────────────────────────────────┐
    │             MULTI-AGENT ORCHESTRATION SYSTEM                        │
    │         (SupplierCoachingOrchestrator - 556 lines)                  │
    ├─────────────────────────────────────────────────────────────────────┤
    │                                                                      │
    │  MASTER ORCHESTRATOR - Coordinates 5 Main Branches:                │
    │                                                                      │
    │  ┌──────────────────────────────────────────────────────────────┐  │
    │  │ BRANCH 1: Data Analysis & Quantification                    │  │
    │  ├──────────────────────────────────────────────────────────────┤  │
    │  │ • SpendAnalyzerAgent         (Category spending patterns)    │  │
    │  │ • ThresholdTrackerAgent      (KPI monitoring)               │  │
    │  │ • RegionalConcentrationAgent (Geographic risk scoring)      │  │
    │  │ • PatternDetectorAgent       (Spend trends & anomalies)     │  │
    │  └──────────────────────────────────────────────────────────────┘  │
    │                                                                      │
    │  ┌──────────────────────────────────────────────────────────────┐  │
    │  │ BRANCH 2: Personalized Recommendations                      │  │
    │  ├──────────────────────────────────────────────────────────────┤  │
    │  │ • PersonalizedCoachAgent     (Custom coaching insights)     │  │
    │  │   → Synthesizes insights from all other branches            │  │
    │  │   → Generates actionable recommendations                    │  │
    │  └──────────────────────────────────────────────────────────────┘  │
    │                                                                      │
    │  ┌──────────────────────────────────────────────────────────────┐  │
    │  │ BRANCH 3: Incumbent Supplier Strategy                       │  │
    │  ├──────────────────────────────────────────────────────────────┤  │
    │  │ • IncumbentStrategyAgent     (Current supplier analysis)    │  │
    │  │   → Dependency risks                                        │  │
    │  │   → Negotiation opportunities                               │  │
    │  │   → Supplier switching scenarios                            │  │
    │  └──────────────────────────────────────────────────────────────┘  │
    │                                                                      │
    │  ┌──────────────────────────────────────────────────────────────┐  │
    │  │ BRANCH 4: Additional Region Sourcing                        │  │
    │  ├──────────────────────────────────────────────────────────────┤  │
    │  │ • EnhancedRegionSourcingAgent (Alternative sourcing)        │  │
    │  │   → New region identification                               │  │
    │  │   → Supplier discovery                                      │  │
    │  │   → Cost/risk comparison                                    │  │
    │  └──────────────────────────────────────────────────────────────┘  │
    │                                                                      │
    │  ┌──────────────────────────────────────────────────────────────┐  │
    │  │ BRANCH 5: System Architecture & Intelligence                │  │
    │  ├──────────────────────────────────────────────────────────────┤  │
    │  │ • WebScrapingAgent           (Market intelligence)          │  │
    │  │ • ParameterTuningEngine      (System optimization)          │  │
    │  │   → Real-time pricing data                                  │  │
    │  │   → Supplier performance metrics                            │  │
    │  │   → Market trends                                           │  │
    │  └──────────────────────────────────────────────────────────────┘  │
    │                                                                      │
    │  ┌──────────────────────────────────────────────────────────────┐  │
    │  │ ADVANCED MODULES (EnhancedOrchestrator)                      │  │
    │  ├──────────────────────────────────────────────────────────────┤  │
    │  │ • TariffCalculatorAgent      (27 products × 150+ routes)     │  │
    │  │ • LeadingQuestionsModule     (Information gathering)        │  │
    │  │ • CostAndRiskLoopEngine      (Optimization iterations)      │  │
    │  │ • ClientCriteriaMatchingEngine (Supplier matching scores)  │  │
    │  │ • VisualWorkflowGenerator    (Diagram generation)           │  │
    │  └──────────────────────────────────────────────────────────────┘  │
    │                                                                      │
    │  EXECUTION FLOW:                                                    │
    │  Branch1 → Branch5 → Branch3 → Branch4 → Branch2                   │
    │           ↓          ↓         ↓         ↓                          │
    │         Executive Summary → Action Plan → Scoring                  │
    │                                                                      │
    └─────────────────────────────────────────────────────────────────────┘
                                   ↓
    ┌──────────────────────────────────────────────────────────────────┐
    │              RULE EVALUATION & COMPLIANCE                         │
    ├──────────────────────────────────────────────────────────────────┤
    │                                                                    │
    │  RuleEvaluationEngine (35+ Rules: R001-R035)                     │
    │                                                                    │
    │  Hard Constraints (Must Satisfy):                                │
    │  • R001: Regional Concentration (max 40%)                        │
    │  • R003: Supplier Dependency (max 60%)                           │
    │  • R023: HHI Concentration Index                                 │
    │                                                                    │
    │  Soft Preferences (Score/Rank):                                  │
    │  • R012: Pricing Benchmarks                                      │
    │  • R015: Quality Thresholds                                      │
    │  • R018: Delivery Reliability                                    │
    │                                                                    │
    │  Risk Assessment (RA001-RA006):                                  │
    │  • Geopolitical risk                                             │
    │  • Financial stability                                           │
    │  • Sustainability metrics                                        │
    │                                                                    │
    └──────────────────────────────────────────────────────────────────┘
                                   ↓
    ┌──────────────────────────────────────────────────────────────────┐
    │                OUTPUT GENERATION & EXPORT                         │
    ├──────────────────────────────────────────────────────────────────┤
    │                                                                    │
    │  ┌─────────────────┐  ┌──────────────┐  ┌────────────────────┐  │
    │  │ Word Documents  │  │ JSON/CSV     │  │ Streamlit Dashboard│  │
    │  │ • Leadership    │  │ • Coaching   │  │ • Real-time charts │  │
    │  │   Briefs        │  │   sessions   │  │ • Interactive UI   │  │
    │  │ • Scorecards    │  │ • Analysis   │  │ • Data export      │  │
    │  │ • Roadmaps      │  │   results    │  │                    │  │
    │  └─────────────────┘  └──────────────┘  └────────────────────┘  │
    │                                                                    │
    │  ┌─────────────────────────────────────┐                         │
    │  │ FastAPI REST Endpoints              │                         │
    │  │ • Real-time data access             │                         │
    │  │ • Integration with 3rd party systems│                         │
    │  └─────────────────────────────────────┘                         │
    │                                                                    │
    └──────────────────────────────────────────────────────────────────┘


                             ┌──────────────────────┐
                             │  CONVERSATION MEMORY │
                             │  (Session History)   │
                             │  Max 100 exchanges   │
                             └──────────────────────┘


═════════════════════════════════════════════════════════════════════════════

                        DATA CORPUS ARCHITECTURE

    ┌─────────────────────────────────────────────────────────────────┐
    │                THREE-TIER DATA CORPUS                            │
    ├─────────────────────────────────────────────────────────────────┤
    │                                                                   │
    │  TIER 1: STRUCTURED DATA (CSVs)                                 │
    │  ├── spend_data.csv             (156 rows, 2025 transactions)   │
    │  ├── supplier_master.csv        (96 suppliers, all metrics)     │
    │  ├── client_master.csv          (17 clients, 7 industries)      │
    │  ├── rule_book.csv              (35 procurement rules)          │
    │  ├── supplier_contracts.csv     (Contract terms)                │
    │  ├── pricing_benchmarks.csv     (Market reference prices)       │
    │  ├── industry_benchmarks.csv    (Performance KPIs)              │
    │  ├── market_pricing.csv         (Market data)                   │
    │  ├── procurement_rulebook.csv   (Extended rules)                │
    │  ├── proof_points.csv           (Customer successes)            │
    │  └── spend_data_multi_industry  (2024 variant data)             │
    │                                                                   │
    │  TIER 2: UNSTRUCTURED DATA (Documents)                          │
    │  ├── policies/ (7 files)                                        │
    │  │   ├── master_procurement_policy.md                           │
    │  │   ├── comprehensive_procurement_policy.md                    │
    │  │   ├── it_hardware_procurement_policy.md                      │
    │  │   ├── cloud_services_procurement_policy.md                   │
    │  │   ├── manufacturing_raw_materials_policy.md                  │
    │  │   ├── healthcare_pharmaceuticals_policy.md                   │
    │  │   └── procurement_policy_manual.md                           │
    │  │                                                               │
    │  ├── best_practices/ (2 files)                                  │
    │  │   ├── vegetable_oil_procurement.md                           │
    │  │   └── it_hardware_best_practices.md                          │
    │  │                                                               │
    │  ├── contracts/ (2 files)                                       │
    │  │   ├── contract_golden_sun_oils.md                            │
    │  │   └── contract_eurofresh_oils.md                             │
    │  │                                                               │
    │  ├── risk_assessments/                                          │
    │  │   └── supplier_risk_assessment_jan_2024.md                   │
    │  │                                                               │
    │  ├── historical_analysis/                                       │
    │  │   └── performance_trends_2021_2024.md                        │
    │  │                                                               │
    │  └── news/                                                      │
    │      └── market_news_jan_2024.md                                │
    │                                                                   │
    │  TIER 3: CALCULATED/DERIVED DATA                                │
    │  ├── calculated_metrics.csv            (KPI calculations)       │
    │  ├── forecasts_projections.csv         (3-year projections)     │
    │  ├── historical_quarterly_trends.csv   (Trending data)          │
    │  ├── action_plan.csv                   (Implementation steps)   │
    │  ├── scenario_planning.csv             (What-if scenarios)      │
    │  ├── supplier_performance_history.csv  (Performance tracking)   │
    │  ├── risk_register.csv                 (Risk tracking)          │
    │  └── pricing_benchmarks_multi.csv      (Multi-industry prices)  │
    │                                                                   │
    │  VECTOR DATABASE                                                │
    │  └── vector_db/                                                 │
    │      └── ChromaDB (Vector embeddings of all unstructured data) │
    │          Uses: OpenAI embeddings                                │
    │          Purpose: RAG (semantic search over policies)           │
    │                                                                   │
    └─────────────────────────────────────────────────────────────────┘


═════════════════════════════════════════════════════════════════════════════

                    TARIFF CALCULATOR COVERAGE

    ┌──────────────────────────────────────────────────────────────┐
    │  27 PRODUCTS × 150+ ROUTES × 3-YEAR PROJECTIONS             │
    ├──────────────────────────────────────────────────────────────┤
    │                                                                │
    │  EDIBLE OILS (5 Products):                                   │
    │  • Rice Bran Oil      [Malaysia, India, Vietnam, Thailand]   │
    │  • Palm Oil           [Indonesia, Malaysia, Singapore]       │
    │  • Sunflower Oil      [Ukraine, Russia, Europe]              │
    │  • Olive Oil          [Spain, Italy, Greece]                 │
    │  • Soybean Oil        [USA, Brazil, Argentina]               │
    │                                                                │
    │  IT HARDWARE (4 Products):                                   │
    │  • Laptops            [China, Taiwan, USA]                   │
    │  • Servers            [USA, China, Singapore]                │
    │  • Network Equipment  [USA, China, Japan]                    │
    │  • Cybersecurity      [USA, Europe, India]                   │
    │                                                                │
    │  MANUFACTURING RAW MATERIALS (4 Products):                   │
    │  • Steel              [China, Japan, Germany, Korea]         │
    │  • Aluminum           [China, USA, Middle East]              │
    │  • Copper             [Chile, Peru, China]                   │
    │  • Plastics           [China, Europe, USA]                   │
    │                                                                │
    │  MANUFACTURING EQUIPMENT (4 Products):                       │
    │  • Manufacturing Eq.  [Germany, Japan, USA]                  │
    │  • Industrial Mach.   [China, Germany, Italy]                │
    │  • Robotics           [Japan, USA, Europe]                   │
    │  • Factory Automation [Germany, Japan, USA]                  │
    │                                                                │
    │  PHARMACEUTICALS & MEDICAL (3 Products):                     │
    │  • Pharmaceuticals    [India, China, Europe]                 │
    │  • Medical Devices    [USA, Germany, Switzerland]            │
    │  • Medical Supplies   [China, USA, Europe]                   │
    │                                                                │
    │  SOFTWARE & CLOUD (2 Products):                              │
    │  • Software Licenses  [USA, Europe, India]                   │
    │  • Cloud Services     [USA, Europe, Asia]                    │
    │                                                                │
    │  TRADE DATA:                                                 │
    │  • Real tariff rates (WTO/ITC verified)                      │
    │  • Logistics costs (85+ routes)                              │
    │  • Lead times (14-45 days)                                   │
    │  • Trade trends (3-year projections)                         │
    │  • Risk assessments (geopolitical, regulatory)               │
    │                                                                │
    └──────────────────────────────────────────────────────────────┘


═════════════════════════════════════════════════════════════════════════════

                    EXAMPLE WORKFLOW VISUALIZATION

┌─ "Find suppliers for Rice Bran Oil in India" ─────────────────────────┐
│                                                                         │
│ Step 1: Parse                                                          │
│   Product: Rice Bran Oil                                              │
│   Region: India                                                       │
│   Action: Find suppliers                                              │
│                                                                         │
├─ Step 2: Query Data Engines ─────────────────────────────────────────┤
│   ┌─ CSV Data ───┐  ┌─ Policies ──┐  ┌─ Web ─────┐  ┌─ LLM ────┐   │
│   │ Malaya Agri  │  │ ISO 22000   │  │ Current   │  │ Synthesis│   │
│   │ Borneo       │  │ HACCP req.  │  │ prices    │  │ & ranking│   │
│   │ $1,285/MT    │  │ Net 60 terms│  │ Jan 2025  │  │ by score │   │
│   └──────────────┘  └─────────────┘  └───────────┘  └──────────┘   │
│                                                                         │
├─ Step 3: Agent Analysis ──────────────────────────────────────────────┤
│   • SpendAnalyzer: 3,250 MT historical                                │
│   • TariffCalculator: 12.5% tariff + $280 logistics = $1,623 landed  │
│   • CriteriaMatcher: 92%, 88%, 85% match scores                       │
│   • ActionPlanner: 8-week implementation plan                         │
│                                                                         │
├─ Step 4: Rule Evaluation ─────────────────────────────────────────────┤
│   ✗ R001: 93.55% APAC > 40% max → VIOLATION                          │
│   ✗ R003: 85% Malaya > 60% max → VIOLATION                           │
│   ✓ R012: $1,285 < $1,310 market → COMPLIANT                         │
│                                                                         │
├─ Step 5: Generate Output ─────────────────────────────────────────────┤
│   1. Streamlit UI: Shows suppliers ranked with scores                 │
│   2. Word Brief: Executive summary with recommendations               │
│   3. Action Plan: 8 steps to diversify and reduce risk                │
│   4. Savings Calc: $78K-$156K annual potential                        │
│                                                                         │
└─ RESULT: Actionable recommendation with full traceability ────────────┘


═════════════════════════════════════════════════════════════════════════════

                    DEPLOYMENT CHECKLIST

✓ Python 3.10+ installed
✓ Beroe_Env virtual environment activated
✓ requirements.txt installed
✓ OpenAI API key configured
✓ 11 CSV files loaded
✓ 15 policy documents indexed
✓ Vector database (ChromaDB) ready
✓ 35 rules initialized
✓ 15+ agents ready
✓ All engines functional

Ready for:
  ✓ Interactive chat (main.py)
  ✓ Web dashboard (app.py)
  ✓ API endpoints (FastAPI)
  ✓ Full analysis workflows
  ✓ Report generation
  ✓ Real-time sourcing

═════════════════════════════════════════════════════════════════════════════
```

## KEY METRICS

| Component | Details |
|-----------|---------|
| **Code Base** | 25,000+ lines across 100+ Python files |
| **Data Coverage** | 7 industries, 27 products, 150+ trade routes |
| **Rules** | 35 procurement rules with hard/soft constraints |
| **Agents** | 15+ specialized agents in 5 coordinated branches |
| **Processing Engines** | 10+ independent processing engines |
| **Data Documents** | 26 total (11 CSVs + 15 unstructured) |
| **Knowledge Base** | 15 policy/intelligence documents indexed |
| **Vector DB** | ChromaDB with OpenAI embeddings |
| **Response Time** | <2s for queries, 5-10s for full analysis |
| **Output Formats** | 5 types (UI, CLI, Word, JSON, CSV, API) |
| **Production Ready** | ✓ Yes - fully integrated and tested |

